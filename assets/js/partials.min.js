(()=>{const e=(e,t)=>{const r="string"==typeof t?t:"";return(e||"").replace(/\{\{\s*root\s*\}\}/g,r).replace(/\{\s*root\s*\}/g,r)},t=e=>{const t=document.querySelector(".berita-mega .mega-posts");if(!t)return;fetch(`${e}berita/news-index.json`,{cache:"no-store"}).then(e=>e.ok?e.json():Promise.reject()).then(e=>{const r=new Map((e||[]).map(e=>[String(e.slug||""),e]));t.querySelectorAll("a.mega-card").forEach(e=>{const t=(e.getAttribute("href")||"").match(/berita\/([^\/]+)\/?$/),a=t?t[1]:"",n=r.get(a);if(!n)return;const c=e.querySelector(".mega-card-body");if(!c)return;if(!c.querySelector(".mega-card-snippet, .mega-card-excerpt")&&n.excerpt){const e=document.createElement("div");e.className="mega-card-snippet mega-card-excerpt",e.textContent=n.excerpt,c.appendChild(e)}const o=c.querySelector(".mega-card-meta");o&&n.date_display&&(o.textContent=n.date_display)})}).catch(()=>{})},r=e=>`iksass:1771210001:partial:raw:${e}`,a=(e,t,r=!0)=>{e.forEach(e=>{e.innerHTML=t,r&&e.removeAttribute("data-include"),e.style.minHeight="0"})},n=async(n,c,o)=>{const s=Array.from(document.querySelectorAll(`[data-include="${n}"]`));if(!s.length)return!1;try{const c=localStorage.getItem(r(n));c&&(a(s,e(c,o),!1),"header"===n&&t(o))}catch{}try{const i=new URL(`partials/${n}.html`,c).toString(),l=await fetch(i,{cache:"no-store"});if(!l.ok)return!1;const h=await l.text(),m=e(h,o);(s[0]?.innerHTML||"")!==m?a(s,m,!0):(s.forEach(e=>e.removeAttribute("data-include")),s.forEach(e=>e.style.minHeight="0")),"header"===n&&t(o);try{localStorage.setItem(r(n),h)}catch{}return!0}catch{return!1}};(async()=>{const e=await(async(e=6)=>{let t=new URL("./",location.href);for(let r=0;r<=e;r++){const e=new URL("partials/header.html",t).toString();try{const r=await fetch(e,{cache:"no-store"});if(r&&r.ok)return t.toString()}catch{}t=new URL("../",t)}return new URL("./",location.href).toString()})(),t=(e=>{try{const t=new URL("./",location.href),r=new URL(e||t.href),a=t.pathname.split("/").filter(Boolean),n=r.pathname.split("/").filter(Boolean);let c=0;return t.pathname.startsWith(r.pathname)&&(c=Math.max(0,a.length-n.length)),"../".repeat(c)}catch{return""}})(e);await Promise.all([n("header",e,t),n("footer",e,t)]),((e,t)=>{try{const r=new URL(e,location.href).href,a=Array.from(document.querySelectorAll("script[src]")).some(e=>new URL(e.getAttribute("src"),location.href).href===r);if(a)return;if(t&&document.querySelector(`script[data-iksass="${t}"]`))return;const n=document.createElement("script");t&&(n.dataset.iksass=t),n.src=e,n.defer=!0,document.head.appendChild(n)}catch{}})(`${t}assets/js/main.js`,"main"),document.dispatchEvent(new CustomEvent("partials:loaded"))})()})();