(function(){
  const params = new URLSearchParams(window.location.search);
  const kom = (params.get('kom') || 'KOMISARIAT').toUpperCase();
  const titleEl = document.getElementById('kom-title');
  const bcEl = document.getElementById('kom-bc');
  if(titleEl) titleEl.textContent = 'Pengurus Komisariat IKSASS ' + kom;
  if(bcEl) bcEl.textContent = kom;
  const headers = document.querySelectorAll('.komisariat-acc .accordion-header');
  const bodies = document.querySelectorAll('.komisariat-acc .accordion-body');
  function closeAll(){
    bodies.forEach(b=>b.style.display='none');
    headers.forEach(h=>{
      const a = h.querySelector('.arrow');
      if(a) a.textContent = '⌄';
    });
  }
  headers.forEach(h=>{
    h.addEventListener('click', ()=>{
      const body = h.nextElementSibling;
      const arrow = h.querySelector('.arrow');
      const isOpen = body && body.style.display === 'block';
      closeAll();
      if(body && !isOpen){
        body.style.display = 'block';
        if(arrow) arrow.textContent = '⌃';
      }
    });
  });
  if(headers[0]) headers[0].click();
})();